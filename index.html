<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>两周学习打卡｜2025-08-12 → 2025-08-25</title>
  <meta name="description" content="按计划执行的两周作息+学习块+康复+打卡网页，带本地存储与打印导出" />
  <style>
    :root{
      --bg:#0b0d10; --card:#111418; --muted:#9aa4b2; --text:#e7ecf2; --accent:#6ee7ff; --accent-2:#72e48b; --danger:#ff5d5d;
      --ring:#1f2833; --border:#1a2028; --shadow:0 10px 25px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:linear-gradient(180deg,#0b0d10 0%, #0d1117 60%, #0b0d10 100%);color:var(--text);font:16px/1.6 -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,"PingFang SC","Hiragino Sans GB","Microsoft YaHei",sans-serif}
    a{color:var(--accent)}
    header{position:sticky;top:0;z-index:50;background:rgba(11,13,16,.7);backdrop-filter:saturate(1.2) blur(10px);border-bottom:1px solid var(--border)}
    .wrap{max-width:1100px;margin:0 auto;padding:18px}
    .title{display:flex;align-items:center;gap:12px}
    .title h1{margin:0;font-size:20px;font-weight:700}
    .badge{padding:4px 10px;border:1px solid var(--ring);border-radius:999px;color:var(--muted);font-size:12px}
    main{max-width:1100px;margin:20px auto;padding:0 18px 100px}
    .grid{display:grid;grid-template-columns:1.2fr .8fr;gap:18px}
    @media (max-width:980px){.grid{grid-template-columns:1fr}}
    .card{background:linear-gradient(180deg,#12161c 0%, #0f141a 100%);border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow)}
    .card h2{margin:0 0 10px 0;font-size:18px}
    .card .hd{display:flex;align-items:center;justify-content:space-between;padding:16px;border-bottom:1px solid var(--border)}
    .card .bd{padding:16px}
    .row{display:flex;flex-wrap:wrap;gap:10px;align-items:center}
    .pill{border:1px solid var(--ring);border-radius:999px;padding:6px 10px;color:var(--muted);font-size:12px}
    .controls{display:flex;flex-wrap:wrap;gap:10px}
    button, .btn{appearance:none;border:1px solid var(--ring);background:#12161c;color:var(--text);padding:10px 12px;border-radius:12px;cursor:pointer;transition:transform .06s ease, border-color .2s ease}
    button:hover{transform:translateY(-1px);border-color:#2a3340}
    .btn-primary{background:linear-gradient(180deg,#14202a,#101922);border-color:#203040}
    .btn-accent{background:linear-gradient(180deg,#0f2730,#0f2230);border-color:#184451}
    .btn-danger{border-color:#3a2222;color:#ffdede;background:linear-gradient(180deg,#251416,#1c0f11)}
    .muted{color:var(--muted)}
    .progress{height:10px;background:#0e1217;border:1px solid var(--border);border-radius:999px;overflow:hidden}
    .progress>i{display:block;height:100%;background:linear-gradient(90deg,var(--accent), var(--accent-2));width:0%}
    .tasks{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:8px}
    @media (max-width:720px){.tasks{grid-template-columns:1fr}}
    .task{display:flex;gap:10px;padding:12px;border:1px solid var(--border);border-radius:12px;background:#0f141a}
    .task input{transform:scale(1.2);margin-top:2px}
    .task .label{flex:1}
    .floating-note{font-size:13px;color:var(--muted);margin-top:6px}
    .kicker{font-size:12px;color:#cfe7ff}
    .aside{position:sticky;top:76px}
    .list{margin:0;padding-left:18px}
    .list li{margin:6px 0}
    .kbd{display:inline-block;padding:1px 6px;border:1px solid var(--ring);border-radius:6px;font-size:12px;color:#cfe7ff}
    .footer{margin-top:22px;font-size:13px;color:var(--muted)}
    .tag{padding:2px 8px;border:1px solid var(--ring);border-radius:999px;font-size:12px;color:#cfe7ff}
    .note{background:#0f161d;border:1px dashed #223040;border-radius:12px;padding:10px}
    .split{display:grid;grid-template-columns:1fr 1fr;gap:14px}
    @media (max-width:780px){.split{grid-template-columns:1fr}}
    .small{font-size:12px}
    .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size:12px;color:#b7c2cf}
    .ghost{opacity:.7}
    /* Print */
    @media print {
      header,.controls,.footer,.hide-print{display:none!important}
      body{background:#fff;color:#000}
      main{padding:0}
      .card{box-shadow:none;border:1px solid #ddd}
    }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="title">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M3 5h18M3 12h18M3 19h18" stroke="#6ee7ff" stroke-width="1.5" stroke-linecap="round"/></svg>
        <h1>两周学习打卡（2025-08-12 → 2025-08-25）</h1>
        <span class="badge">先立规矩 · 先小后大</span>
        <span class="badge">本地保存 · 可打印</span>
      </div>
    </div>
  </header>

  <main>
    <div class="grid">
      <!-- 左侧主卡片：每日打卡 -->
      <section class="card" aria-labelledby="dayCardTitle">
        <div class="hd">
          <div>
            <h2 id="dayCardTitle">今日打卡</h2>
            <div class="row small">
              <span class="pill" id="datePill">--</span>
              <span class="pill" id="weekPill">第1周</span>
              <span class="pill" id="hintPill">—</span>
            </div>
          </div>
          <div class="controls">
            <label class="btn hide-print" for="datePicker">选日期</label>
            <input id="datePicker" class="hide-print" type="date" min="2025-08-12" max="2025-08-25" />
            <button class="btn-primary hide-print" id="btnToday">跳到今天</button>
            <button class="btn-accent hide-print" id="btnMarkAll">全选</button>
            <button class="btn hide-print" id="btnClear">清空</button>
            <button class="btn hide-print" id="btnAddTemp">添加临时任务</button>
            <button class="btn hide-print" id="btnPrint">打印</button>
          </div>
        </div>
        <div class="bd">
          <div class="row" style="align-items:center;gap:12px;margin-bottom:10px">
            <div class="kicker">完成度</div>
            <div class="progress" style="flex:1;min-width:200px"><i id="bar"></i></div>
            <div id="percent" class="kicker">0%</div>
          </div>

          <div id="dayNote" class="note small" style="display:none"></div>

          <div id="tasks" class="tasks" role="group" aria-label="今日任务清单"></div>

          <div class="footer">
            <span class="tag">提示</span> 勾选自动保存到浏览器本地（不会上传）。点击“打印”可生成纸质勾选表。
          </div>
        </div>
      </section>

      <!-- 右侧侧栏：作息、康复、周清单、导入导出 -->
      <aside class="aside">
        <section class="card" style="margin-bottom:18px">
          <div class="hd"><h2>作息固定模板</h2></div>
          <div class="bd small">
            <ul class="list">
              <li><b>06:45</b> 起床｜温水</li>
              <li><b>06:50–07:10</b> 颈肩胸椎活动/呼吸</li>
              <li><b>07:10–07:30</b> 洗漱早餐</li>
              <li><b>07:30–07:40</b> 今日任务排程</li>
              <li><b>08:00–10:00</b> 学习块 A（高数主攻）</li>
              <li><b>10:10–11:10</b> 学习块 B（英语长难句/词汇）</li>
              <li><b>11:15–12:00</b> 学习块 C（专业课精读）</li>
              <li><b>12:00–13:30</b> 午饭 + 午休</li>
              <li><b>13:30–15:30</b> 学习块 D（专业题）</li>
              <li><b>15:40–16:10</b> 康复/拉伸（肩）</li>
              <li><b>16:15–17:15</b> 学习块 E（政治1000题）</li>
              <li><b>18:00–19:00</b> 晚饭 + 散步</li>
              <li><b>19:00–21:00</b> 学习块 F（数学题串/错题回炉）</li>
              <li><b>21:10–21:40</b> 学习块 G（英语阅读/翻译/作文）</li>
              <li><b>21:40–22:00</b> 日清（打卡+错题整理+明日三件事）</li>
              <li><b>22:30</b> 熄灯</li>
            </ul>
          </div>
        </section>

        <section class="card" style="margin-bottom:18px">
          <div class="hd"><h2>康复（肩）参考</h2></div>
          <div class="bd small">
            <div class="split">
              <div>
                <div class="kicker">晨间 20′</div>
                <ul class="list">
                  <li>胸椎伸展/开书式 2×10</li>
                  <li>肩胛骨前伸/后缩 2×12</li>
                  <li>颈深屈肌激活 3×10（停5秒）</li>
                </ul>
              </div>
              <div>
                <div class="kicker">下午 30′</div>
                <ul class="list">
                  <li>弹力带等长 外旋/内旋 各3×12（RPE 6/10）</li>
                  <li>侧卧外旋 3×12（控制离心）</li>
                  <li>肩胛平面举（≤90°）2×12</li>
                  <li>胸小肌放松+门框拉伸 2×30s</li>
                </ul>
              </div>
            </div>
            <div class="floating-note">禁忌：过头推举、爆发甩肩、极端外展外旋、倒立负重。出现刺痛/夜间痛↑ → 次日减量50%。</div>
          </div>
        </section>

        <section class="card" style="margin-bottom:18px">
          <div class="hd"><h2>周清单（建议周日做）</h2></div>
          <div class="bd small">
            <ul class="list">
              <li>统计各科番茄数与有效题量</li>
              <li>本周 TOP3 错因（知识/粗心/时间分配）</li>
              <li>各科各 1 处丢分最高章节 & 下周唯一突破点</li>
              <li>丢弃 1 件无效资料/方法；保留 1 件高产出方法</li>
              <li>生成下周“一页纸”</li>
            </ul>
            <div class="floating-note">第1周：8/17（周日）半休仅做 G 块 + 周清；第2周：8/24（周日）做“周小结”+自测小卷。</div>
          </div>
        </section>

        <section class="card">
          <div class="hd"><h2>数据 · 备份</h2></div>
          <div class="bd small">
            <div class="row" style="gap:8px 10px">
              <button class="btn" id="btnExport">导出 JSON</button>
              <label class="btn" for="fileImport">导入 JSON</label>
              <input id="fileImport" type="file" accept="application/json" class="hide-print" style="display:none" />
              <button class="btn-danger" id="btnResetAll">重置全部</button>
            </div>
            <div class="floating-note">导出会下载一个 <span class="mono">studyplan_2025W33-34.json</span> 文件。导入会覆盖同名日期的数据。</div>
          </div>
        </section>
      </aside>
    </div>

    <section class="card" style="margin-top:18px">
      <div class="hd"><h2>两周任务排程（参考）</h2></div>
      <div class="bd small">
        <div class="split">
          <div>
            <div class="kicker">第1周｜8/12–8/18</div>
            <ul class="list">
              <li>数学：高数18讲 1–4；《660题》各20–30；1000题 A1–A2（中档为主）；线代讲义1–2</li>
              <li>英语：句句真研每日10句+功能句1条；阅读逻辑1–2章；黄皮书基试卷1套（拆两天精读）</li>
              <li>政治：《1000题》马原/毛中特 每日30题；《核心考案》前30–40页</li>
              <li>专业：信号绪论+基础，每节后5–8题；数电逻辑代数与门电路 20–30题+2张卡诺图</li>
              <li>休息：8/17（周日）下午半休，仅 G 块 + 周清</li>
            </ul>
          </div>
          <div>
            <div class="kicker">第2周｜8/19–8/25</div>
            <ul class="list">
              <li>数学：高数18讲 5–8；《660题》配套；1000题 A3–A4；线代讲义3–4</li>
              <li>英语：每日2篇精读；手译本逐句改译；作文主题句每日5–8句</li>
              <li>政治：《1000题》毛中特/史纲 每日40题；晚间10′概念口述</li>
              <li>专业：信号卷积/冲激/拉氏；数组合逻辑（编码器/译码器/加法器）框图与最简式</li>
              <li>周末：8/24（周日）周小结 + 自测20题小卷（信号10+数电10）</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

  </main>

  <script>
  ;(() => {
    const DATE_START = '2025-08-12';
    const DATE_END   = '2025-08-25';
    const KEY_PREFIX = 'studyplan_2025W33-34_';

    const DAILY_TASKS = [
      { id:'wake',   label:'06:45起床、晨间活动完成' },
      { id:'onepage',label:'今日“一页纸计划”已写（3个最重要任务）' },
      { id:'A',      label:'学习块A（高数）完成 50/10×2' },
      { id:'B',      label:'学习块B（英语长难句）完成 50/10' },
      { id:'C',      label:'学习块C（专业精读）完成 50/10' },
      { id:'nap',    label:'午休 ≥ 20 分钟' },
      { id:'D',      label:'学习块D（专业题）完成 50/10×2' },
      { id:'rehab',  label:'康复训练（下午段）完成' },
      { id:'E',      label:'学习块E（政治1000题 ≥ 30/40题）' },
      { id:'F',      label:'学习块F（数学题串/错题回炉）完成 50/10×2' },
      { id:'G',      label:'学习块G（英语阅读/翻译/作文）50/10' },
      { id:'review', label:'日清：错题登记 + 明日三件事' }
    ];

    const DAY_HINTS = {
      '2025-08-17': '第1周周日·半休：建议仅完成 G 块（英语精读）+ 周清单复盘 30–40 分钟。',
      '2025-08-24': '第2周周日·总结：完成“周小结”+ 自测 20 题小卷（信号10 + 数电10）。'
    };

    const $ = s => document.querySelector(s);
    const $$ = s => document.querySelectorAll(s);

    const elTasks = $('#tasks');
    const elBar   = $('#bar');
    const elPct   = $('#percent');
    const elDatePill = $('#datePill');
    const elWeekPill = $('#weekPill');
    const elHintPill = $('#hintPill');
    const elDatePicker = $('#datePicker');
    const elDayNote = $('#dayNote');

    function clampDate(d){
      if (d < DATE_START) return DATE_START;
      if (d > DATE_END) return DATE_END;
      return d;
    }

    function fmtDate(d){
      const dt = new Date(d + 'T00:00:00');
      const w = ['周日','周一','周二','周三','周四','周五','周六'][dt.getDay()];
      const [y,m,dd] = d.split('-');
      return `${y}-${m}-${dd}（${w}）`;
    }

    function getWeekIndex(d){
      return (new Date(d) <= new Date('2025-08-18')) ? 1 : 2;
    }

    function storageKey(d){ return KEY_PREFIX + d; }

    function loadDay(d){
      const raw = localStorage.getItem(storageKey(d));
      let data = { tasks: {}, custom: [] };
      if (raw) { try { data = JSON.parse(raw) } catch(e){} }
      // ensure default tasks exist
      DAILY_TASKS.forEach(t => { if (!(t.id in data.tasks)) data.tasks[t.id] = false; });
      return data;
    }

    function saveDay(d, data){
      localStorage.setItem(storageKey(d), JSON.stringify(data));
    }

    function renderTasks(d){
      const data = loadDay(d);
      elTasks.innerHTML = '';
      const frag = document.createDocumentFragment();

      const mkTask = (t, idx, isCustom=false) => {
        const item = document.createElement('label');
        item.className = 'task';
        item.dataset.id = t.id;
        item.innerHTML = `
          <input type="checkbox" ${data.tasks[t.id]? 'checked':''} aria-label="${t.label}">
          <div class="label">${t.label}${isCustom? ' <span class="muted">（自定义）</span>':''}</div>
          ${isCustom? '<button class="btn small ghost" data-act="del">删除</button>':''}
        `;
        item.querySelector('input').addEventListener('change', (e)=>{
          data.tasks[t.id] = e.target.checked;
          saveDay(d, data); updateProgress(d);
        });
        if(isCustom){
          item.querySelector('[data-act="del"]').addEventListener('click', ()=>{
            if (!confirm('删除该自定义任务？')) return;
            // remove
            data.custom = data.custom.filter(x=>x.id!==t.id);
            delete data.tasks[t.id];
            saveDay(d, data); renderTasks(d);
          });
        }
        frag.appendChild(item);
      };

      DAILY_TASKS.forEach(mkTask);
      data.custom.forEach((t,i)=> mkTask(t, i, true));
      elTasks.appendChild(frag);
      updateProgress(d);

      // Day note
      if (DAY_HINTS[d]){ elDayNote.style.display='block'; elDayNote.textContent = DAY_HINTS[d]; }
      else { elDayNote.style.display='none'; elDayNote.textContent = ''; }
    }

    function updateProgress(d){
      const data = loadDay(d);
      const ids = [...DAILY_TASKS.map(t=>t.id), ...data.custom.map(t=>t.id)];
      const total = ids.length || 1;
      const done = ids.filter(id=> data.tasks[id]).length;
      const pct  = Math.round(done*100/total);
      elBar.style.width = pct + '%';
      elPct.textContent = pct + '%';
    }

    function setCurrentDate(d){
      d = clampDate(d);
      window.__currentDate = d;
      elDatePicker.value = d;
      elDatePill.textContent = fmtDate(d);
      elWeekPill.textContent = `第${getWeekIndex(d)}周`;
      elHintPill.textContent = (new Date(d).toDateString() === new Date().toDateString())? '今天' : '计划内日期';
      renderTasks(d);
    }

    function todayInRange(){
      const now = new Date();
      const t = now.toISOString().slice(0,10);
      if (t < DATE_START || t > DATE_END) return DATE_START; // 默认跳到首日
      return t;
    }

    // Controls
    $('#btnToday').addEventListener('click', ()=> setCurrentDate(todayInRange()));
    $('#datePicker').addEventListener('change', (e)=> setCurrentDate(e.target.value||DATE_START));
    $('#btnPrint').addEventListener('click', ()=> window.print());
    $('#btnMarkAll').addEventListener('click', ()=>{
      const d = window.__currentDate; const data = loadDay(d);
      [...DAILY_TASKS.map(t=>t.id), ...data.custom.map(t=>t.id)].forEach(id=> data.tasks[id]=true);
      saveDay(d, data); renderTasks(d);
    });
    $('#btnClear').addEventListener('click', ()=>{
      const d = window.__currentDate; const data = loadDay(d);
      [...DAILY_TASKS.map(t=>t.id), ...data.custom.map(t=>t.id)].forEach(id=> data.tasks[id]=false);
      saveDay(d, data); renderTasks(d);
    });

    $('#btnAddTemp').addEventListener('click', ()=>{
      const text = prompt('输入临时任务内容：');
      if (!text) return;
      const d = window.__currentDate; const data = loadDay(d);
      const id = 'custom_' + Date.now();
      data.custom.push({ id, label:text.trim() });
      data.tasks[id] = false; saveDay(d, data); renderTasks(d);
    });

    $('#btnExport').addEventListener('click', ()=>{
      const all = {};
      const start = new Date(DATE_START), end = new Date(DATE_END);
      for (let dt = new Date(start); dt <= end; dt.setDate(dt.getDate()+1)){
        const d = dt.toISOString().slice(0,10);
        const raw = localStorage.getItem(storageKey(d));
        if (raw) all[d] = JSON.parse(raw);
      }
      const blob = new Blob([JSON.stringify(all,null,2)], {type:'application/json'});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'studyplan_2025W33-34.json';a.click();
      setTimeout(()=> URL.revokeObjectURL(a.href), 1000);
    });

    $('#fileImport').addEventListener('change', (e)=>{
      const f = e.target.files[0]; if (!f) return;
      const reader = new FileReader();
      reader.onload = () => {
        try{
          const data = JSON.parse(reader.result);
          Object.keys(data||{}).forEach(d=>{
            if (d>=DATE_START && d<=DATE_END){
              localStorage.setItem(storageKey(d), JSON.stringify(data[d]));
            }
          });
          alert('导入完成'); renderTasks(window.__currentDate);
        }catch(err){ alert('导入失败：文件格式不正确'); }
      };
      reader.readAsText(f);
      e.target.value='';
    });

    $('#btnResetAll').addEventListener('click', ()=>{
      if (!confirm('确定要清空 8/12–8/25 期间的所有打卡数据？')) return;
      const start = new Date(DATE_START), end = new Date(DATE_END);
      for (let dt = new Date(start); dt <= end; dt.setDate(dt.getDate()+1)){
        const d = dt.toISOString().slice(0,10);
        localStorage.removeItem(storageKey(d));
      }
      renderTasks(window.__currentDate);
    });

    // Init
    const initial = clampDate(todayInRange());
    setCurrentDate(initial);
  })();
  </script>
</body>
</html>
